<!-- wavviz.html -->
<!DOCTYPE html>
<html>
<head>
	<title>wav viz</title>
	<style type="text/css">

		body {
			font-size: 62.5%;
			background-color: black;
			color: white;
		}	

		#log {
			background-color: black;
			color: chartreuse;
			font-family: monospace;
		}

		.visualizer {
			width: 70%;
		}

	</style>
	<style src="style.css"></style>
	<script type="text/javascript" src="helpers.js"></script>
	<script type="text/javascript" src="audioInit.js"></script>
</head>
<body>

	<div id="vizualizer">
		<canvas id="oscilloscope"></canvas>
	</div>


  <div class="container">
    <h1>wav test</h1>
    <div class="level">
    	<span class="level__label">level</span>
    	<span class="level__display"></span>
	</div>

    <div class="slidecontainer">
		  <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
		  <p>Value: <span id="demo"></span></p>
		</div>
    <section id="log">

    </section>
  </div>

	<script>
	console.log('hello')
	</script>

	<input type="file" id="file-selector" multiple>

	<button class="start">start</button>
	<button class="stop">stop</button>


	<script type="text/javascript" defer>
;(function (window, document) {
	//
	// Variables
	//
	// html elements
	const fileSelector = document.getElementById('file-selector');
	const levelDisplay = document.getElementsByClassName('level__display')[0]

	// fun in dom debug thing
	const log = document.getElementById('log');
	function addLog(data) {
		const newLog = document.createElement('div')
		newLog.classList.add('log-item');
		newLog.appendChild(document.createTextNode(data));

		log.appendChild(newLog)
	}
	window.addLog = addLog;
	addLog('starting audio context');

	// web audio objects
	var AudioContext = window.AudioContext || window.webkitAudioContext;
	const audioContext = new AudioContext();
	const masterGain = audioContext.createGain();
	masterGain.connect(audioContext.destination);
	const { loadSound } = audioEnviornment(audioContext);

	//
	// Inits & Event Listeners
	//
	fileSelector
		.addEventListener('change', audioEnviornment(audioContext)
			.loadSound(masterGain));

})(window, document);

</script>

</body>
</html>